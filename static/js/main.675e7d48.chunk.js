(window.webpackJsonptimeboxing=window.webpackJsonptimeboxing||[]).push([[0],{110:function(e,t,n){e.exports=n(236)},115:function(e,t,n){},137:function(e,t){},139:function(e,t){},179:function(e,t){},180:function(e,t){},236:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(105),o=n.n(i),s=(n(115),n(5)),c=n(6),u=n(8),l=n(7),m=n(9),d=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleConfirmation=function(e){var t=n.props,a=t.onConfirmation,r=t.elapsedTime,i=t.taskTimeInSeconds;60*n.taskTimeInput.current.value>r&&60*n.taskTimeInput.current.value!==i?(e.preventDefault(),a(n.titleInput.current.value,n.taskTimeInput.current.value)):alert("wprowadzony czas nie mo\u017ce byc mniejszy od ".concat((r/60).toFixed(2)," min. oraz musi by\u0107 inny ni\u017c wprowadzony czas pocz\u0105tkowy"))},n.titleInput=r.a.createRef(),n.taskTimeInput=r.a.createRef(),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.taskTimeInSeconds,a=e.isEditable;return r.a.createElement("div",{className:a?"TimeboxEditor":"TimeboxEditor inactive"},r.a.createElement("label",{htmlFor:"taskInput"},"Co robisz?"),r.a.createElement("input",{id:"taskInput",type:"text",defaultValue:t,ref:this.titleInput}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"timeInput"},"Ile minut?"),r.a.createElement("input",{id:"timeInput",type:"number",defaultValue:n/60,ref:this.taskTimeInput}),r.a.createElement("br",null),r.a.createElement("button",{disabled:!a,onClick:this.handleConfirmation},"Zatwierd\u017a zmiany"))}}]),t}(r.a.Component),p=n(109),h=n(29),f=n.n(h),b=function(e){var t=Math.floor(e);return[Math.floor(e/3600),Math.floor(e/60)>=60?Math.floor(e/60)-60:Math.floor(e/60),Math.floor(e%60),t>=0?Math.floor(1e3*(e-t)):0]};function g(e,t,n,a){return function(e,t){for(t=t.toString();t.length<e;)t="0".concat(t);return t}(n,function(e,t,n){return n=Math.max(e,Math.min(n,t))}(e,t,a))}function T(e){var t=e.className,n=e.hours,a=e.minutes,i=e.seconds,o=e.miliseconds,s=e.coloredNumbers,c=f()("clock__numbers",{"clock__numbers--colored":s});return n=g(0,24,2,n),a=g(0,59,2,a>=60?a%60:a),i=g(0,59,2,i),o=g(0,999,3,o),r.a.createElement("h2",{className:"clock "+t}," ","Pozosta\u0142o ",r.a.createElement("mark",{className:c},n),":",r.a.createElement("mark",{className:c},a),":",r.a.createElement("mark",{className:c},i),":",r.a.createElement("mark",{className:c},o))}T.defaultProps={className:"",hours:0,minutes:0,seconds:0,miliseconds:0};var E=T;var v=function(e){var t=e.className,n=void 0===t?"":t,a=e.percent,i=e.trackRemaining,o=e.barColor,s=f()("progress",n,{"progress--reverse":i});function c(e){if(o===e)return!0}var u=f()("progress__bar",{"progress__bar--red":c("red"),"progress__bar--blue":c("blue"),"progress__bar--green":c("green")}),l=!0===i?"calc(100 % - ".concat(a," %)"):"".concat(a,"% ");return r.a.createElement("div",{className:s},r.a.createElement("div",{className:u,style:{width:"".concat(l," ")}}))};var k=function(e){var t=e.title,n=e.isRunning,a=e.isPaused,i=e.isEditable,o=e.pausesCount,s=e.remainingTime,c=e.actualPercent,u=e.taskTimeInSeconds,l=e.handleStart,m=e.handleStop,d=e.togglePause,h=e.onConfirm,f=b(n?s:u),g=Object(p.a)(f,4),T=g[0],k=g[1],y=g[2],w=g[3];return r.a.createElement("div",{className:i?"CurrentTimebox inactive":"CurrentTimebox"},r.a.createElement("h1",null,t),r.a.createElement(E,{className:a?"inactive":"",hours:T,minutes:k,seconds:y,miliseconds:w,coloredNumbers:!0}),r.a.createElement(v,{className:a?"inactive":"",percent:c,trackRemaining:!1,barColor:"red"}),r.a.createElement("button",{onClick:h,disabled:i},"Edytuj"),r.a.createElement("button",{onClick:l,disabled:n},"Start"),r.a.createElement("button",{onClick:m,disabled:!n},"Stop"),r.a.createElement("button",{onClick:d,disabled:!n},a?"Wzn\xf3w":"Pauzuj"),"Liczba przerw: ",o)},y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={title:"To pole powinno dzia\u0142a\u0107",taskTimeInSeconds:0,isRunning:!1,isPaused:!1,isEditable:!0,pausesCount:0,initialTime:0,actualTime:0,taskTimeInMs:0,endTime:0,remainingTime:0,elapsedTime:0,actualPercent:0},n.handleChangeTitle=function(e){n.setState({title:e})},n.handleChangeTaskTime=function(e){var t=n.state.elapsedTime;n.setState({taskTimeInSeconds:60*e,taskTimeInMs:60*e*1e3}),t>0&&n.handleChangeTaskTimeWhileRunning()},n.handleChangeTaskTimeWhileRunning=function(){n.setState((function(e){return{taskTimeInMs:e.taskTimeInMs-1e3*e.elapsedTime}})),n.setEndTime(),n.setRemainingTime()},n.handleStart=function(){var e=Date.now();n.setState({isRunning:!0,initialTime:e}),n.start(),n.setEndTime()},n.handleStop=function(){n.stop();var e=n.state.taskTimeInSeconds;n.setState({isRunning:!1,isPaused:!1,pausesCount:0,initialTime:0,actualTime:0,taskTimeInMs:1e3*e,endTime:0,remainingTime:0,actualPercent:0,elapsedTime:0})},n.handleEdit=function(){n.setState((function(e){return{isEditable:!e.isEditable}}))},n.handleEditConfirmation=function(e,t){n.handleEdit(),n.handleChangeTitle(e),n.handleChangeTaskTime(t)},n.start=function(){n.countDown=setInterval((function(){var e=Date.now();console.log("timer is working"),n.setState({actualTime:e}),n.setRemainingTime(),n.setElapsedTime(),n.setActualPercent(),n.forceStop()}),10)},n.stop=function(){clearInterval(n.countDown)},n.forceStop=function(){n.state.remainingTime<=0&&n.stop()},n.togglePause=function(){n.setState((function(e){return{isPaused:!e.isPaused,pausesCount:e.isPaused?e.pausesCount+1:e.pausesCount}})),n.state.isPaused?n.repause():n.stop()},n.repause=function(){var e=n.state.remainingTime,t=Date.now(),a=1e3*e;n.setState({isRunning:!0,initialTime:t,taskTimeInMs:a}),n.start(),n.setEndTime()},n.setEndTime=function(){n.setState((function(e){return{endTime:e.initialTime+e.taskTimeInMs}}))},n.setRemainingTime=function(){n.setState((function(e){return{remainingTime:(e.endTime-e.actualTime)/1e3}}))},n.setElapsedTime=function(){n.setState((function(e){return{elapsedTime:e.taskTimeInSeconds-e.remainingTime}}))},n.setActualPercent=function(){n.setState((function(e){return{actualPercent:e.elapsedTime/e.taskTimeInSeconds*100}}))},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.title,n=e.taskTimeInSeconds,a=e.isRunning,i=e.isPaused,o=e.isEditable,s=e.pausesCount,c=e.initialTime,u=e.actualTime,l=e.taskTimeInMs,m=e.endTime,p=e.remainingTime,h=e.actualPercent,f=e.elapsedTime;return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.StrictMode,null,o?r.a.createElement(d,{title:t,taskTimeInSeconds:n,isRunning:a,isEditable:o,elapsedTime:f,onChangeTitle:this.handleChangeTitle,onChangeTaskTime:this.handleChangeTaskTime,onConfirmation:this.handleEditConfirmation}):r.a.createElement(k,{title:t,isRunning:a,isPaused:i,isEditable:o,pausesCount:s,initialTime:c,actualTime:u,taskTimeInMs:l,endTime:m,remainingTime:p,actualPercent:h,elapsedTime:f,taskTimeInSeconds:n,handleStart:this.handleStart,handleStop:this.handleStop,start:this.start,stop:this.stop,forceStop:this.forceStop,togglePause:this.togglePause,repause:this.repause,setEndTime:this.setEndTime,setRemainingTime:this.setRemainingTime,setElapsedTime:this.setElapsedTime,setActualPercent:this.setActualPercent,onConfirm:this.handleEdit})))}}]),t}(r.a.Component),w=n(106),x=n(108);var j=function(e){var t=e.title,n=e.taskTime,a=e.onDelete,i=e.onEdit,o=e.onChange;if(n<=0)throw new Error("Czas zadania musi by\u0107 wi\u0119kszy ni\u017c\xa0zero");return r.a.createElement("div",{className:"Timebox"},r.a.createElement("h3",null,t," - ",n," min."),r.a.createElement("button",{onClick:a},"Usu\u0144"),r.a.createElement("button",{onClick:i},"Zmie\u0144"),r.a.createElement("input",{onChange:o}))},S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleSubmit=function(e){var t=n.props.onCreate;e.preventDefault(),t({title:n.form.current.children.taskInput.value,taskTime:n.form.current.children.timeInput.value}),n.form.current.children.taskInput.value="",n.form.current.children.timeInput.value=""},n.form=r.a.createRef(),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{ref:this.form,onSubmit:this.handleSubmit,className:"TimeboxCreator"},r.a.createElement("label",{htmlFor:"taskInput"},"Co robisz?"),r.a.createElement("input",{id:"taskInput",type:"text"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"timeInput"},"Ile minut?"),r.a.createElement("input",{id:"timeInput",type:"number"}),r.a.createElement("br",null),r.a.createElement("button",null," Dodaj Timebox'a"))}}]),t}(r.a.Component);var O=function(e){var t=e.message,n=e.children,a=e.hasError;return r.a.createElement("div",null,a?r.a.createElement("div",{className:"ErrorMessage"},t):n)},C=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={hasError:!1},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log("%c wyst\u0105pi\u0142 nast\u0119puj\u0105cy b\u0142\u0105d","color: red",e,t)}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.children;return r.a.createElement(O,{hasError:this.state.hasError,message:t},n)}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),I=n(10),P=n.n(I),N=n(18),z=n(117),M="http://localhost:5000/timeboxes",F={getAllTimeboxes:function(){var e=Object(N.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get(M);case 2:return t=e.sent,e.next=5,t.data;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addTimebox:function(){var e=Object(N.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.post(M,t);case 2:return n=e.sent,e.next=5,n.data;case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),replaceTimebox:function(){var e=Object(N.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("Timebox has to have an id to be updated");case 2:return e.next=4,z.put("".concat(M,"/").concat(t.id),t);case 4:return n=e.sent,e.next=7,n.data;case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeTimebox:function(){var e=Object(N.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("Timebox has to have an id to be updated");case 2:return e.next=4,z.delete("".concat(M,"/").concat(t.id));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var R=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={timeboxes:[],editInput:"",hasError:!1,loadingError:!1,loading:!0},n.handleCreate=function(e){try{n.addTimebox(e)}catch(t){console.log("metoda addTimebox wyrzuci\u0142a b\u0142\u0105d"),n.setState({hasError:!0})}},n.addTimebox=function(e){F.addTimebox(e).then((function(e){return n.setState((function(t){return{timeboxes:[].concat(Object(x.a)(t.timeboxes),[e])}}))}))},n.removeTimebox=function(e){F.removeTimebox(n.state.timeboxes[e]).then((function(){n.setState((function(t){return{timeboxes:t.timeboxes.filter((function(t,n){return n!==e}))}}))}))},n.updateArray=function(e,t,n){return e.splice(t,1),e.splice(t,0,n),e},n.editTimebox=function(e,t){F.replaceTimebox(t).then((function(){n.setState((function(a){var r=a.timeboxes;return n.updateArray(r,e,t),{timeboxes:r,editInput:""}}))}))},n.changeTitle=function(e){n.setState({editInput:e.target.value})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;F.getAllTimeboxes().then((function(t){return e.setState({timeboxes:t})})).catch((function(t){console.log("Wyst\u0105pi\u0142 b\u0142\u0105d : ".concat(t)),e.setState({loadingError:!0})})).finally((function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.timeboxes,a=t.editInput,i=t.hasError,o=t.loading,s=t.loadingError;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{hasError:i,message:"timebox creator przesta\u0142 dzia\u0142a\u0107"},r.a.createElement(S,{onCreate:this.handleCreate})),r.a.createElement(O,{hasError:s,message:"Nie uda\u0142o si\u0119 za\u0142adowa\u0107 timebox\xf3w"},r.a.createElement("h2",null,o?"loading timeboxes...":null),n.map((function(t,n){return r.a.createElement(C,{key:t.id,message:"Co\u015b si\u0119 wywali\u0142o w Timeboxie"},r.a.createElement(j,{title:t.title,taskTime:t.taskTime,onDelete:function(){return e.removeTimebox(n)},onEdit:function(){return e.editTimebox(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(w.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{title:a}))},onChange:e.changeTitle}))}))))}}]),t}(r.a.Component),D=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleSubmit=function(e){var t=n.props.onLoginAttempt;e.preventDefault(),t({email:n.loginForm.current.children.emailInput.value,password:n.loginForm.current.children.passwordInput.value}),n.loginForm.current.children.emailInput.value="",n.loginForm.current.children.passwordInput.value=""},n.loginForm=r.a.createRef(),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{ref:this.loginForm,onSubmit:this.handleSubmit,className:"LoginForm"},this.props.errorMessage?r.a.createElement("div",{className:"LoginForm__error-message"},this.props.errorMessage):"",r.a.createElement("label",{htmlFor:"emailInputt"},"Email: "),r.a.createElement("input",{id:"emailInput",type:"email"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"passwordInput"},"Password: "),r.a.createElement("input",{id:"passwordInput",type:"password"}),r.a.createElement("br",null),r.a.createElement("button",null,"Zaloguuj"))}}]),t}(r.a.Component),L={login:function(){var e=Object(N.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("".concat("http://localhost:5000","/login"),"POST",t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function _(e,t,n){return U.apply(this,arguments)}function U(){return(U=Object(N.a)(P.a.mark((function e(t,n,a){var r,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a?JSON.stringify(a):void 0,e.next=3,fetch(t,{method:n,headers:{"Content-Type":"application/json"},body:r});case 3:if((i=e.sent).ok){e.next=6;break}throw new Error("Something went wrong!...");case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=n(107),J=n.n(W),Z=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={accessToken:null,previousLoginAttemptFailed:!1},n.getUserEmail=function(){return console.log(),J.a.decode(n.state.accessToken).email},n.handleLogout=function(){n.setState({accessToken:null,previousLoginAttemptFailed:!1})},n.handleLoginAttempt=function(e){L.login(e).then((function(e){var t=e.accessToken;n.setState({accessToken:t,previousLoginAttemptFailed:!1})})).catch((function(){n.setState({previousLoginAttemptFailed:!0})}))},n.isUserLoggedIn=function(){return!!n.state.accessToken},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(C,{message:"wyst\u0105pi\u0142 b\u0142\u0105d ca\u0142ej aplikacji"},this.isUserLoggedIn()?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},"Witaj ",this.getUserEmail(),r.a.createElement("a",{className:"header__logout-link",onClick:this.handleLogout,href:"#"},"Wyloguj")),r.a.createElement("div",{className:"App"},r.a.createElement(R,null),r.a.createElement(C,{message:"wyst\u0105pi\u0142 b\u0142\u0105d komponentu EditableTimebox"},r.a.createElement(y,null)))):r.a.createElement(D,{errorMessage:this.state.previousLoginAttemptFailed?"Nie uda\u0142o si\u0119 zalogowa\u0107!":null,onLoginAttempt:this.handleLoginAttempt}))}}]),t}(r.a.Component);o.a.render(r.a.createElement(Z,null),document.querySelector(".root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.675e7d48.chunk.js.map