(window.webpackJsonptimeboxing=window.webpackJsonptimeboxing||[]).push([[4],{222:function(e,t,n){"use strict";n.r(t);var a=n(26),r=n.n(a),i=n(50),o=n(223),c="http://localhost:5000/timeboxes",s={setAccessToken:function(e){o.defaults.headers.common.Authorization="Bearer ".concat(e)},getAllTimeboxes:function(){var e=Object(i.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get(c);case 2:return n=e.sent,e.next=5,n.data;case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addTimebox:function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.post(c,t);case 2:return a=e.sent,e.next=5,a.data;case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),replaceTimebox:function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("Timebox has to have an id to be updated");case 2:return e.next=4,o.put("".concat(c,"/").concat(t.id),t);case 4:return a=e.sent,e.next=7,a.data;case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),removeTimebox:function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("Timebox has to have an id to be updated");case 2:return e.next=4,o.delete("".concat(c,"/").concat(t.id));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};t.default=s},244:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(55),o=n.n(i),c=n(51);var s=function(e){return r.a.createElement(c.a.Consumer,null,(function(e){var t=e.accessToken;return r.a.createElement(r.a.Fragment,null,"Witaj ",u(t))}))},u=function(e){return o.a.decode(e).email};var l=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement(s,null),r.a.createElement("br",null),r.a.createElement(c.a.Consumer,null,(function(e){var t=e.onLogout;return r.a.createElement("a",{className:"header__logout-link",onClick:t,href:"#"},"Wyloguj")}))))},m=n(241),d=n(221),f=n(211),p=n(12),h=n(13),b=n(18),T=n(14),E=n(19),g=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(b.a)(this,Object(T.a)(t).call(this,e))).handleSubmit=function(e){var t=n.props.onCreate;e.preventDefault(),t({title:n.form.current.children.taskInput.value,taskTime:n.form.current.children.timeInput.value}),n.form.current.children.taskInput.value="",n.form.current.children.timeInput.value=""},n.form=r.a.createRef(),n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{ref:this.form,onSubmit:this.handleSubmit,className:"TimeboxCreator"},r.a.createElement("label",{htmlFor:"taskInput"},"Co robisz?"),r.a.createElement("input",{id:"taskInput",type:"text"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"timeInput"},"Ile minut?"),r.a.createElement("input",{id:"timeInput",type:"number"}),r.a.createElement("br",null),r.a.createElement("button",null," Dodaj Timebox'a"))}}]),t}(r.a.Component),v=n(52),k=n(54),C=n(222);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=r.a.lazy((function(){return n.e(6).then(n.bind(null,242))}));var y=function(){var e=Object(a.useState)({editInput:"",hasError:!1,loadingError:!1,loading:!0}),t=Object(f.a)(e,2),i=t[0],o=t[1],s=Object(a.useState)([]),u=Object(f.a)(s,2),l=u[0],d=u[1],p=Object(a.useContext)(c.a);Object(a.useEffect)((function(){C.default.setAccessToken(p.accessToken),C.default.getAllTimeboxes(p.accessToken).then((function(e){return d(e)})).catch((function(e){console.log("Wyst\u0105pi\u0142 b\u0142\u0105d : ".concat(e)),o((function(e){return w({},e,{loadingError:!0})}))})).finally((function(){o((function(e){return w({},e,{loading:!1})}))}))}),[]);var h=function(e){Promise.resolve().then(n.bind(null,222)).then((function(t){t.default.addTimebox(e,p.accessToken).then((function(e){return d((function(t){return[].concat(Object(m.a)(t),[e])}))}))}))},b=function(e){var t=e.target.value;o((function(e){return w({},e,{editInput:t})}))},T=i.editInput,E=i.hasError,S=i.loading,y=i.loadingError;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{hasError:E,message:"timebox creator przesta\u0142 dzia\u0142a\u0107"},r.a.createElement(g,{onCreate:function(e){try{h(e,p.accessToken)}catch(t){console.log("metoda addTimebox wyrzuci\u0142a b\u0142\u0105d"),o({hasError:!0})}}})),r.a.createElement(k.a,{hasError:y,message:"Nie uda\u0142o si\u0119 za\u0142adowa\u0107 timebox\xf3w"},r.a.createElement("h2",null,S?"loading timeboxes...":null),l.map((function(e,t){return r.a.createElement(v.a,{key:e.id,message:"Co\u015b si\u0119 wywali\u0142o w Timeboxie"},r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(I,{title:e.title,taskTime:e.taskTime,onDelete:function(){return e=t,void C.default.removeTimebox(l[e],p.accessToken).then((function(){d((function(t){return t.filter((function(t,n){return n!==e}))}))}));var e},onEdit:function(){return n=t,a=w({},e,{title:T}),void C.default.replaceTimebox(a).then((function(){d((function(e){var t,r,i,o=e;return r=n,i=a,(t=o).splice(r,1),t.splice(r,0,i),o})),o((function(e){return w({},e,{editInput:""})}))}));var n,a},onChange:b})))}))))},j=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(b.a)(this,Object(T.a)(t).call(this,e))).handleConfirmation=function(e){var t=n.props,a=t.onConfirmation,r=t.elapsedTime,i=t.taskTimeInSeconds;60*n.taskTimeInput.current.value>r&&60*n.taskTimeInput.current.value!==i?(e.preventDefault(),a(n.titleInput.current.value,n.taskTimeInput.current.value)):alert("wprowadzony czas nie mo\u017ce byc mniejszy od ".concat((r/60).toFixed(2)," min. oraz musi by\u0107 inny ni\u017c wprowadzony czas pocz\u0105tkowy"))},n.titleInput=r.a.createRef(),n.taskTimeInput=r.a.createRef(),n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.taskTimeInSeconds,a=e.isEditable;return r.a.createElement("div",{className:a?"TimeboxEditor":"TimeboxEditor inactive"},r.a.createElement("label",{htmlFor:"taskInput"},"Co robisz?"),r.a.createElement("input",{id:"taskInput",type:"text",defaultValue:t,ref:this.titleInput}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"timeInput"},"Ile minut?"),r.a.createElement("input",{id:"timeInput",type:"number",defaultValue:n/60,ref:this.taskTimeInput}),r.a.createElement("br",null),r.a.createElement("button",{disabled:!a,onClick:this.handleConfirmation},"Zatwierd\u017a zmiany"))}}]),t}(r.a.Component),O=n(220),x=n.n(O),P=function(e){var t=Math.floor(e);return[Math.floor(e/3600),Math.floor(e/60)>=60?Math.floor(e/60)-60:Math.floor(e/60),Math.floor(e%60),t>=0?Math.floor(1e3*(e-t)):0]};function z(e,t,n,a){return function(e,t){for(t=t.toString();t.length<e;)t="0".concat(t);return t}(n,function(e,t,n){return n=Math.max(e,Math.min(n,t))}(e,t,a))}function M(e){var t=e.className,n=e.hours,a=e.minutes,i=e.seconds,o=e.miliseconds,c=e.coloredNumbers,s=x()("clock__numbers",{"clock__numbers--colored":c});return n=z(0,24,2,n),a=z(0,59,2,a>=60?a%60:a),i=z(0,59,2,i),o=z(0,999,3,o),r.a.createElement("h2",{className:"clock "+t}," ","Pozosta\u0142o ",r.a.createElement("mark",{className:s},n),":",r.a.createElement("mark",{className:s},a),":",r.a.createElement("mark",{className:s},i),":",r.a.createElement("mark",{className:s},o))}M.defaultProps={className:"",hours:0,minutes:0,seconds:0,miliseconds:0};var N=M;var R=function(e){var t=e.className,n=void 0===t?"":t,a=e.percent,i=e.trackRemaining,o=e.barColor,c=x()("progress",n,{"progress--reverse":i});function s(e){if(o===e)return!0}var u=x()("progress__bar",{"progress__bar--red":s("red"),"progress__bar--blue":s("blue"),"progress__bar--green":s("green")}),l=!0===i?"calc(100 % - ".concat(a," %)"):"".concat(a,"% ");return r.a.createElement("div",{className:c},r.a.createElement("div",{className:u,style:{width:"".concat(l," ")}}))};var D=function(e){var t=e.title,n=e.isRunning,a=e.isPaused,i=e.isEditable,o=e.pausesCount,c=e.remainingTime,s=e.actualPercent,u=e.taskTimeInSeconds,l=e.handleStart,m=e.handleStop,d=e.togglePause,p=e.onConfirm,h=P(n?c:u),b=Object(f.a)(h,4),T=b[0],E=b[1],g=b[2],v=b[3];return r.a.createElement("div",{className:i?"CurrentTimebox inactive":"CurrentTimebox"},r.a.createElement("h1",null,t),r.a.createElement(N,{className:a?"inactive":"",hours:T,minutes:E,seconds:g,miliseconds:v,coloredNumbers:!0}),r.a.createElement(R,{className:a?"inactive":"",percent:s,trackRemaining:!1,barColor:"red"}),r.a.createElement("button",{onClick:p,disabled:i},"Edytuj"),r.a.createElement("button",{onClick:l,disabled:n},"Start"),r.a.createElement("button",{onClick:m,disabled:!n},"Stop"),r.a.createElement("button",{onClick:d,disabled:!n},a?"Wzn\xf3w":"Pauzuj"),"Liczba przerw: ",o)},_=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(b.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={title:"To pole powinno dzia\u0142a\u0107",taskTimeInSeconds:0,isRunning:!1,isPaused:!1,isEditable:!0,pausesCount:0,initialTime:0,actualTime:0,taskTimeInMs:0,endTime:0,remainingTime:0,elapsedTime:0,actualPercent:0},n.handleChangeTitle=function(e){n.setState({title:e})},n.handleChangeTaskTime=function(e){var t=n.state.elapsedTime;n.setState({taskTimeInSeconds:60*e,taskTimeInMs:60*e*1e3}),t>0&&n.handleChangeTaskTimeWhileRunning()},n.handleChangeTaskTimeWhileRunning=function(){n.setState((function(e){return{taskTimeInMs:e.taskTimeInMs-1e3*e.elapsedTime}})),n.setEndTime(),n.setRemainingTime()},n.handleStart=function(){var e=Date.now();n.setState({isRunning:!0,initialTime:e}),n.start(),n.setEndTime()},n.handleStop=function(){n.stop();var e=n.state.taskTimeInSeconds;n.setState({isRunning:!1,isPaused:!1,pausesCount:0,initialTime:0,actualTime:0,taskTimeInMs:1e3*e,endTime:0,remainingTime:0,actualPercent:0,elapsedTime:0})},n.handleEdit=function(){n.setState((function(e){return{isEditable:!e.isEditable}}))},n.handleEditConfirmation=function(e,t){n.handleEdit(),n.handleChangeTitle(e),n.handleChangeTaskTime(t)},n.start=function(){n.countDown=setInterval((function(){var e=Date.now();console.log("timer is working"),n.setState({actualTime:e}),n.setRemainingTime(),n.setElapsedTime(),n.setActualPercent(),n.forceStop()}),10)},n.stop=function(){clearInterval(n.countDown)},n.forceStop=function(){n.state.remainingTime<=0&&n.stop()},n.togglePause=function(){n.setState((function(e){return{isPaused:!e.isPaused,pausesCount:e.isPaused?e.pausesCount+1:e.pausesCount}})),n.state.isPaused?n.repause():n.stop()},n.repause=function(){var e=n.state.remainingTime,t=Date.now(),a=1e3*e;n.setState({isRunning:!0,initialTime:t,taskTimeInMs:a}),n.start(),n.setEndTime()},n.setEndTime=function(){n.setState((function(e){return{endTime:e.initialTime+e.taskTimeInMs}}))},n.setRemainingTime=function(){n.setState((function(e){return{remainingTime:(e.endTime-e.actualTime)/1e3}}))},n.setElapsedTime=function(){n.setState((function(e){return{elapsedTime:e.taskTimeInSeconds-e.remainingTime}}))},n.setActualPercent=function(){n.setState((function(e){return{actualPercent:e.elapsedTime/e.taskTimeInSeconds*100}}))},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.title,n=e.taskTimeInSeconds,a=e.isRunning,i=e.isPaused,o=e.isEditable,c=e.pausesCount,s=e.initialTime,u=e.actualTime,l=e.taskTimeInMs,m=e.endTime,d=e.remainingTime,f=e.actualPercent,p=e.elapsedTime;return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.StrictMode,null,o?r.a.createElement(j,{title:t,taskTimeInSeconds:n,isRunning:a,isEditable:o,elapsedTime:p,onChangeTitle:this.handleChangeTitle,onChangeTaskTime:this.handleChangeTaskTime,onConfirmation:this.handleEditConfirmation}):r.a.createElement(D,{title:t,isRunning:a,isPaused:i,isEditable:o,pausesCount:c,initialTime:s,actualTime:u,taskTimeInMs:l,endTime:m,remainingTime:d,actualPercent:f,elapsedTime:p,taskTimeInSeconds:n,handleStart:this.handleStart,handleStop:this.handleStop,start:this.start,stop:this.stop,forceStop:this.forceStop,togglePause:this.togglePause,repause:this.repause,setEndTime:this.setEndTime,setRemainingTime:this.setRemainingTime,setElapsedTime:this.setElapsedTime,setActualPercent:this.setActualPercent,onConfirm:this.handleEdit})))}}]),t}(r.a.Component);var F=function(){var e=Object(a.useState)(null),t=Object(f.a)(e,2),i=t[0],o=t[1];return Object(a.useEffect)((function(){n.e(5).then(n.t.bind(null,243,7)).then((function(e){o(e.getQuote())})).catch((function(e){return console.log(e,"Couldn't load inspirational-quotes library")}))})),r.a.createElement(r.a.Fragment,null,i?r.a.createElement("figure",null,r.a.createElement("figcaption",null,r.a.createElement("cite",null,i.author)),r.a.createElement("blockquote",null,i.text)):"Loading quote...")};t.default=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l,null),r.a.createElement(y,null),r.a.createElement(v.a,{message:"wyst\u0105pi\u0142 b\u0142\u0105d komponentu EditableTimebox"},r.a.createElement(_,null)),r.a.createElement(F,null))}}}]);
//# sourceMappingURL=4.0e447e9b.chunk.js.map